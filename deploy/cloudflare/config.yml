# Konfiguracja tunelu Cloudflare
# Ten plik jest teraz jedynym źródłem prawdy dla reguł ingress.

# UWAGA: Upewnij się, że w panelu Cloudflare Zero Trust dla tego tunelu
# NIE MA żadnych publicznych reguł hostname. Wszystkie reguły są zarządzane z tego pliku.

tunnel: 6b41a4ce-bd21-42aa-90cb-606c29d6abd0
credentials-file: /etc/cloudflared/6b41a4ce-bd21-42aa-90cb-606c29d6abd0.json

ingress:
  # Reguła 1: Kieruje ruch API (np. suitapp.jcit.pl/api/products) do kontenera backendu.
  - hostname: suitapp.jcit.pl
    path: /api/.*
    service: http://backend:3000

  # Reguła 2: Kieruje cały pozostały ruch z subdomeny suitapp.jcit.pl do kontenera frontendu.
  - hostname: suitapp.jcit.pl
    service: http://frontend:80

  # Reguła 3: Kieruje ruch z domeny głównej jcit.pl do serwisu 'aboutme' z CV.
  - hostname: jcit.pl
    service: http://aboutme:3000

  # Reguła 4: Domyślna, łapie cały pozostały ruch i zwraca błąd 404. Musi być na końcu.
  - service: http_status:404
